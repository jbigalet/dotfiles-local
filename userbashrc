# vim:filetype=sh
alias vim="vimx"

alias g="git clone"
alias gs="git status -sb"
alias gss="git status"
alias ga="git add"
alias gau="git add -u"
alias gc="git commit -m"
alias gca="git commit --amend"
alias gl="git log --graph --pretty=format:'%Cred%h%Creset %an: %s - %Creset %C(yellow)%d%Creset %Cgreen(%cr)%Creset' --abbrev-commit --date=relative"
alias gls="git log"
alias gd="git diff"
alias gm="git diff --name-only --diff-filter=U"
alias gdl="git diff HEAD~1"
alias gdlc="git diff HEAD~1 HEAD"
alias gdc="git diff --cached"
alias gdp="git diff @{1}.."
alias gp="git push origin master"
alias gpo="git push origin"
alias gg="git pull --rebase origin master"
alias ggo="git pull --rebase origin"
alias gb="git branch -vv"
alias gbs="git branch"
alias gt="git stash"
alias gtp="git stash pop"
alias gtl="git stash show"
alias gts="git stash show -p"
alias gh="git checkout"
# __git_complete gh _git_checkout
alias ghn="git checkout -B"
# __git_complete ghn _git_checkout
alias gf="git fetch"
alias gfo="git fetch origin"
alias gym="git merge"
alias gymm="git merge master"
alias gyr="git rebase"
alias gyrm="git rebase master"

alias tarx="tar -zxvf"
alias tarc="tar -zcvf"

alias czsh="vim ~/.zshrc"
alias cvim="vim ~/.vimrc"
alias cbash="vim ~/.userbashrc"
alias cb="cbash"

alias ls="ls --color=auto"
alias ll="ls -Ahltr --color=auto"
alias grep="grep --color=auto"
alias gr="grep -nr"

alias e="vim"
alias p="ipython"

alias nocaps="setxkbmap -option caps:escape"

alias reload="source ~/.bashrc"

alias tat="tmux attach -t"

function mkdir_cd() {
  mkdir -p $1
  cd $1
}
alias cm=mkdir_cd

function removelink() {
  [ -L "$1" ] && cp --remove-destination "$(readlink "$1")" "$1"
}

shopt -s autocd

. ~/.bin/packages/z/z.sh

alias re="rez env"
alias fe="re envTools -- rfetch"

function cdp() {
  package_dir=$(re libPkg -- cd2pkg $1)
  if [ $? != 0 ]; then
    $cdp_err=$?
    printf "Impossible to find rez package $1\n"
    exit $cdp_err
  else
    cd $package_dir
  fi
}

function cdf() {
  fe $1
  cdp $1-dev
}

function asot() {
  mplayer http://archive.org/download/Armin_Van_Buuren_-_A_State_Of_Trance_$1/Armin_Van_Buuren_-_A_State_Of_Trance_$1.mp3
}

alias proscope="re proscope -- proscope"


source ~/.bin/git-prompt.sh
export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWUNTRACKEDFILES=1
export PS1=${PS1:0:-2}'\033[0;31m$(__git_ps1)\033[0m > '

source ~/.bin/alias-completion.sh
